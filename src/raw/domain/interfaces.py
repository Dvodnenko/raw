from typing import Protocol, Optional, Any, Iterator

from .entities import Task


class RepositoryFactory(Protocol):
    def tasks(self) -> "TaskRepository": ...

class SpecCompiler(Protocol):
    def compile(self, spec: Any): ...


class TaskRepository(Protocol):
    def add(self, entity: Task): ...
    def save(self, entity: Task): ...
    def get_by_id(self, id: int) -> Optional[Task]: ...
    def find(self, spec: Any = None) -> Iterator[Task]: ...
    def remove(self, id: int): ...
